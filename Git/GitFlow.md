# Git-Flow

------

## Git flow란?

**소스 코드 형상/이력 관리**를 효율적으로하고 **협업**할 때 발생할 수 있는 문제점을 최소화할 수 있는 **전략**



## Git flow 전략

![img](https://blog.kakaocdn.net/dn/lOzqA/btqxVeGUYHf/qUWKHgkDZfOAvkPjAXwG8K/img.png)

- master branch : **배포**되었거나 배포될 소스가 저장되는 브랜치

- develop branch : 다음 배포를 위해서 **개발**을 진행하는 브랜치

  

이 두 개의 브랜치는 remote repository에 항상 유지되는 브랜치다.

master 브랜치는 배포가 될 때마다 태그만 달아주는 형식으로 관리를 한다.

예를들어서 제품1.0.0 , 제품 1.2.1 등의 배포버전이 있으면 해당 버전에 태그를 달아서 언제든 원하는 버전의 소스를 받아볼 수 있게 하는 역할을 한다.

develop 브랜치는 여러 명의 개발자가 함께 공유하면서 개발을 진행하는 브랜치다.

대신 이 브랜치에 직접적으로 여러 명이 다 같이 개발하는 것은 아니다.

개발자들이 각각 개발해야하는 기능은 개발하기 전에 자신의 로컬에 브랜치를 따로 생성해서 개발을 진행하고, 로컬 브랜치에서 개발이 완료되면 완료된 소스를 develop 브랜치에 푸시하거나 PullRequest를 보내서 내부적인 코드 리뷰 후에 merge하는 것을 통해 개발이 진행된다.

개발자 각각이 아니라 프로젝트 관점에서 보면 결국 개발이 진행되는 곳은 develop 브랜치다.





- feature branch : 각 개발자에 의해 **기능 단위 개발**이 진행되는 브랜치

- hotfixs branch : 배포 버전에 생긴 문제로 **긴급한 트러블슈팅**이 필요할 때 개발이 진행되는 브랜치

- release branch : **내부적으로 배포할 준비**가 되었다고 생각되는 소스가 저장되는 브랜치

  

feature 브랜치는 위에서 설명한 브랜치다.

프로젝트를 여러 명의 개발자들과 함께 진행할 때, 요구사항에 있는 여러 기능을 적절히 분배해서 개발자들과 일을 나누고 개발한다고 가정해보자.

내가 '회원가입' 기능을 개발해야한다면 remote repository에 develop 브랜치로부터 회원가입 기능을 위한 브랜치를 내 로컬에 생성해서 진행한다.

이 때 내 로컬에 기능을 위해서 생성한 브랜치가 feature 브랜치다.

중간에 개발이 진행되면서 "domain 생성", "db연동", "암호화 적용" 등의 commit 메세지를 남길 것이고 완료되면 remote repository의 develop 브랜치로 merge되고 이 브랜치는 사라지게 된다.

feature 브랜치를 로컬이 아니라 원격에 생성해도 된다. 개발자들간의 합의하에 말이다.

hotfixs는 배포버전에 문제가 발생해서 긴급하게 해당 기능만 수정이 필요할 때 사용하는 브랜치다.

실제 배포된 master 브랜치가 있고 이후에 개발이 지속적으로 진행된 develop 브랜치가 있는 상황이라고 생각해보자

이 때 배포된 버전에서 버그가 발생하면 어떻게 해야할까 develop 브랜치는 이미 다음에 배포될 버전이 충분히 개발된 버전이라서 건드리면 안된다.

이 때는 배포된 master브랜치에서 새로운 hotfix 브랜치를 따고 문제가 생긴 코드를 고쳐서 master 브랜치에 merge한다.

아무래도 이미 배포된 버전에서 문제가 생겼기 때문에 즉각적으로 수정이 필요하다.

따라서 master로 직접으로 merge된다.

또한 실제 출시된 버전에서 생긴 문제는 develop 브랜치에도 적용해야한다. 운영에서 발견된 심각한 문제이기 때문이다. (그림 참조)

release 브랜치는 QA로 넘길 소스라고 보면된다.

요구되는 기능들을 모두 개발하고 내부적으로 배포하기 전에 테스트를 거치는 소스가 저장되는 브랜치다.

만약 QA중에 문제가 발생하면 버그픽스를 진행하고 버그가 제거된 release 소스를 중간에 develop 브랜치에 적용해서 개발을 추가 개발을 이어갈 수도 있다.

하지만 추가 기능 개발을 위해서 다시 develop 브랜치로 가지는 않는다.

만약 develop으로 버그가 수정된 소스가 가고 기능 개발을 한다면 그 기능은 이번 release가 아닌 그 다음 release 브랜치에 적용될 것이다.



## 참조

https://jeong-pro.tistory.com/196

https://woowabros.github.io/experience/2017/10/30/baemin-mobile-git-branch-strategy.html